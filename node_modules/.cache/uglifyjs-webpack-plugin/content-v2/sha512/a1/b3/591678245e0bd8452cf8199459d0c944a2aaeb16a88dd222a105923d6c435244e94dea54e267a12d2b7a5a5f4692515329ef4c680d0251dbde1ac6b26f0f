{"code":"!function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"\",i(i.s=0)}([function(t,e,i){\"use strict\";i.r(e);class s{constructor(t,e,i,s,r,h,a){this.size=t,this.step=25,this.start=100,this.x=e,this.y=i,this.radius=t*step+start,this.gameheight=s,this.gamewidth=r,this.dir=h,this.speed=a,this.vx=vx,this.vy=vy}vectrify(){return{x:this.vx,y:this.vy}}render(t){t.beginPath(),t.arc(this.x,this.y,this.radius,2*Math.Pi,!1),t.linewidth=3,t.strokeStyle=\"white\",t.stroke()}update(t){this.x=t*this.vx,this.y=t*this.vy,this.y>gameheight+this.radius&&(this.y=-this.radius),this.y<-this.radius&&(this.y=gameheight+this.radius),this.x>gamewidth+this.radius&&(this.x=-this.radius),this.x<-this.radius&&(this.x=gamewidth+this.radius)}collide(t){var e=Vector.scalar_mult(this.dir,this.speed),i=Vector.scalar_mult(t.dir,t.speed),s=Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2)),r=(t.x-this.x)/s,h=(t.y-this.y)/s,a=2*(e.x*r+e.y*h-i.x*r-i.y*h)/(this.size+t.size),n={x:e.x-a*this.size*r,y:e.y-a*this.size*h},u={x:i.x+a*t.size*r,y:i.y+a*t.size*h};this.dir=Vector.normalize(n),this.speed=Vector.magnitude(n),t.dir=Vector.normalize(u),t.speed=Vector.magnitude(u)}destroy(){var t=size/2;if(size>=1){size,speed;var e=Vector.normalize(Vector.perpendicular(this.dir)),i=this.x-e.x*(size*step+start),r=this.y-e.x*(size*step+start),h=this.x+e.x*(size*step+start),a=this.y+e.x*(size*step+start);new s(t,i,r,this.gameheight,this.gamewidth,Vector.rotate(this.dir,Math.PI/5),this.speed),new s(t,h,a,this.gameheight,this.gamewidth,Vector.rotate(this.dir,Math.PI/-5),this.speed)}}}function r(t,e){return{x:t.x*Math.cos(e)-t.y*Math.sin(e),y:t.x*Math.sin(e)+t.y*Math.cos(e)}}class h{constructor(t,e,i){this.x=e,this.y=i,this.dist=0,this.dir=t,this.speed=.1,this.radius=2}render(t){t.beginPath(),t.arc(this.x,this.y,this.radius,2*Math.Pi,!1),t.fillStyle=\"white\",t.fill()}update(t){return this.x+=dir.x*speed*t,this.y+=dir.x*speed*t,this.dist=this.dist+speed*t,this.dist>200}}class a{constructor(t,e){this.gameheight=e,this.gamewidth=t,this.x=t/2,this.y=e/2,this.dir={x:0,y:1},this.acceleration=.02,this.radius=30,this.speed=0,this.points=[{x:0,y:-15},{x:10,y:10},{x:0,y:6},{x:-10,y:10}],this.canFire=!0,this.firetimeout=.8,this.lastfired=0}render(t){t.beginpath(),t.moveTo(this.x,this.y-15),t.lineTo(this.x+10,this.y+15),t.lineTo(this.x,this.y+12),t.lineTo(this.x-10,this.y+15),t.closePath(),t.strokeStyle=\"blue\",t.stroke()}update(t,e,i){speed>t&&(speed-=i*acceleration),speed<t&&(speed+=i*acceleration),e>0&&(this.dir=r(this.dir,.02*i),this.points.forEach(function(t){t=r(t,.02*i)})),e<0&&(this.dir=r(this.dir,-.02*i),this.points.forEach(function(t){t=r(t,-.02*i)})),this.canFire||(this.lastfired+=i,this.lastfired>this.firetimeout&&(this.canFire=!0)),this.x+=this.dir.x*speed*i,this.y+=this.dir.y*speed*i}fire(){return!!this.canFire&&(this.lastfired=0,this.canFire=!1,new h(this.dir,this.x,this.y))}}function n(t){var e=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)}(t);return{x:t.x/e,y:t.y/e}}new class{constructor(t,e){this._start=null,this.WIDTH=t,this.HEIGHT=e,this.backBuffer=document.createElement(\"canvas\"),this.backBuffer.width=this.WIDTH,this.backBuffer.height=this.HEIGHT,this.backBufferCtx=this.backBuffer.getContext(\"2d\"),this.screenBuffer=document.createElement(\"canvas\"),this.screenBuffer.width=this.WIDTH,this.screenBuffer.height=this.HEIGHT,this.screenBufferCtx=this.screenBuffer.getContext(\"2d\"),document.body.append(this.screenBuffer),this.player=new a(this.WIDTH,this.HEIGHT),this.asteroids=[],this.bullets=[];var i=math.random()*(this.WIDTH-(this.player.radius+this.WIDTH/2))+this.WIDTH,r=n({x:math.random(),y:math.random()}),h=.02+.05*math.random();this.asteroids.append(new s(2,i,this.HEIGHT/2,this.HEIGHT,this.WIDTH,r,h)),window.addEventListener(\"keydown\",t=>handleKeydown(t)),window.addEventListener(\"keyup\",t=>handleKeyup(t))}handleKeydown(t){switch(t.key){case\" \":this.currentInput.space=!0;break;case\"ArrowLeft\":case\"a\":this.currentInput.left=!0;break;case\"ArrowRight\":case\"d\":this.currentInput.right=!0;break;case\"ArrowUp\":case\"w\":this.currentInput.up=!0;break;case\"ArrowDown\":case\"s\":this.currentInput.down=!0}}handleKeyup(t){switch(t.key){case\" \":this.currentInput.space=!1;break;case\"ArrowLeft\":case\"a\":this.currentInput.left=!1;break;case\"ArrowRight\":case\"d\":this.currentInput.right=!1;break;case\"ArrowUp\":case\"w\":this.currentInput.up=!1;break;case\"ArrowDown\":case\"s\":this.currentInput.down=!1}}y_dir(){return this.currentInput.up&&this.currentInput.down?0:this.currentInput.up?1:this.currentInput.down?-1:0}r_dir(){return this.currentInput.left&&this.currentInput.down?0:this.currentInput.left?-1:this.currentInput.right?1:0}update(t){if(this.player.update(this.y_dir(),this.r_dir(),t),this.asteroids.forEach(function(e){e.update(t)}),this.currentInput.space){var e=this.player.fire();fire&&this.bullets.append(e)}for(var i=0;i<this.bullets.length;i++)this.bullets[i].update(t)&&this.bullets.splice(i,1)}render(t){this.backBufferCtx.clearRect(0,0,this.WIDTH,this.HEIGHT),this.player.render(this.backBufferCtx),this.asteroids.forEach(function(t){t.render(this.backBufferCtx)}),this.bullets.forEach(function(t){t.render(this.backBufferCtx)}),this.screenBufferCtx.drawImage(this.backBuffer,0,0)}loop(t){var e=this._frame_start?t-this._frame_start:0;this.update(e),this.render(e),this._frame_start=t,window.requestAnimationFrame(t=>{this.loop(t)})}}(1024,768).loop()}]);","extractedComments":[]}